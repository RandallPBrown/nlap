<% @title = "Listing agent_stats" %>

<%= javascript_include_tag "papaparse.js" %>

<% content_for :description do %>
  <p>Edit this template in <code>app/views/AgentStats/index.html.erb</code>.</p>
  <% end %>

  <% content_for :actions do %>
    <%= link_to new_agent_stat_path, class: 'btn btn-primary btn-large pull-right' do %>
      <%= fa_icon_tag "plus" %> Add Agent stat
      <% end %>
      <% end %>

<style>
.loading-image {
  position: absolute;
  top: 50%;
  left: 50%;
  z-index: 10;
}
.loader
{
    display: none;
    width:200px;
    height: 200px;
    position: fixed;
    top: 50%;
    left: 50%;
    text-align:center;
    margin-left: -50px;
    margin-top: -100px;
    z-index:2;
    overflow: auto;
}

</style>
      <div class="container">
        <div class="row">
          <div class="col-md-9">
            <div class="card card-sheet sheet-condensed">
              <div class="table-responsive">
              <table class="table table-striped table-hover table-sm-responsive">
                <thead>
                  <tr>
                                          <th>Extension</th>
                                          <th>Name</th>
                                          <th>Date</th>
                                          <th>Shift</th>
                                          <th>Total login</th>
                                          <th>Total break</th>
                                          <th>Net login</th>
                                          <th>Requested worktime</th>
                                          <th>Availability</th>
                                          <th>Occupancy</th>
                                          <th>Queue calls</th>
                                          <th>Queue talk</th>
                                          <th>Direct calls</th>
                                          <th>Direct talk</th>
                                          <th>Outbound calls</th>
                                          <th>Outbound talk</th>
                                          <th>Callback calls</th>
                                          <th>Callback talk</th>
                                          <th>Deleted</th>
                                          <th>Un ans</th>
                                          <th>Picked</th>
                                          <th>Recover</th>
                                          <th>Power dial</th>
                                          <th>Acw</th>
                                          <th>Wrapup time</th>
                                          <th>Total calls</th>
                                          <th>Total talk</th>
                                          <th>Aht</th>
                                        <th></th>
                  </tr>
                </thead>
                <tbody>
                <% @agent_stats.each do |agent_stat| %>
                  <tr>
                                          <td><%= agent_stat.extension %></td>
                                          <td><%= agent_stat.name %></td>
                                          <td><%= agent_stat.date %></td>
                                          <td><%= agent_stat.shift %></td>
                                          <td><%= agent_stat.total_login %></td>
                                          <td><%= agent_stat.total_break %></td>
                                          <td><%= agent_stat.net_login %></td>
                                          <td><%= agent_stat.requested_worktime %></td>
                                          <td><%= agent_stat.availability %></td>
                                          <td><%= agent_stat.occupancy %></td>
                                          <td><%= agent_stat.queue_calls %></td>
                                          <td><%= agent_stat.queue_talk %></td>
                                          <td><%= agent_stat.direct_calls %></td>
                                          <td><%= agent_stat.direct_talk %></td>
                                          <td><%= agent_stat.outbound_calls %></td>
                                          <td><%= agent_stat.outbound_talk %></td>
                                          <td><%= agent_stat.callback_calls %></td>
                                          <td><%= agent_stat.callback_talk %></td>
                                          <td><%= agent_stat.deleted %></td>
                                          <td><%= agent_stat.un_ans %></td>
                                          <td><%= agent_stat.picked %></td>
                                          <td><%= agent_stat.recover %></td>
                                          <td><%= agent_stat.power_dial %></td>
                                          <td><%= agent_stat.acw %></td>
                                          <td><%= agent_stat.wrapup_time %></td>
                                          <td><%= agent_stat.total_calls %></td>
                                          <td><%= agent_stat.total_talk %></td>
                                          <td><%= agent_stat.aht %></td>
                                        <td class="actions text-right">
                      <div class="btn-group">
                        <%= link_to theme_icon_tag("eye"), agent_stat, 'data-toggle': 'tooltip', title: 'Show', class: "btn btn-link" %>
                        <%= link_to theme_icon_tag("pencil-alt"), edit_agent_stat_path(agent_stat), 'data-toggle': 'tooltip', title: 'Edit', class: "btn btn-link" %>
                        <%= link_to theme_icon_tag("trash"), agent_stat, 'data-toggle': 'tooltip', title: 'Delete',
                        data: { confirm: 'Are you sure?' }, method: :delete, class: 'btn btn-link' %>
                      </div>
                      </td>
                    </tr>
                    <% end %>
                    <% if @agent_stats.length == 0 %>
                    <tr><td colspan=42 class='text-center'>No agent_stats.</td></tr>
                    <% end %>
                    </tbody>
                  </table>
                </div>
                </div>

                                  <%# Remove the trailing if condition if you're using pagination. %>
                  <%= will_paginate(@agent_stats) %>
                
                              </div>


              <div id="sidebar" class="col-md-3">

                <ul class="nav nav-stacked nav-caret-left bg-gray-200 card small pb-2">
                  <li><h6 class="mt-3 ml-3">Sub Menu</h6></li>
                  <li class="nav-item">
                  </li>
                  <li class="nav-item active">
                  <a class="nav-link" href="#">Salaries</a>
                  </li>
                  <li class="nav-item">
                  <a class="nav-link" href="#">Disciplinary Items</a>
                  </li>
                  <li class="nav-item">
                  <a class="nav-link" href="#">Firings</a>
                  </li>
                </ul>
              </div> <!-- /#sidebar -->
            </div>
          </div>

      <div class="container">
        <div class="row">
          <div class="col-4">
            <div class="card card-mini" style="height: 100%;">
              <div class="card-header bg-primary">
                <h5 class="font-weight-bold m-auto text-white">OPTIONS</h5>
              </div>
              <div class="card-body">
                <div class="form-group form-check">
                  <div class="text-center border bg-light">
                    <input type="checkbox" id="stream" class="form-check-input"> 
                    <label class="form-check-label font-weight-bold text-right" for="stream">Stream</label><br>
                  </div>
                  <span>Results are delivered row by row to a step function. Use with large inputs that would crash the browser.</span>
                </div>
              <hr>
                <div class="form-group form-check">
                  <div class="text-center border bg-light">
                    <input type="checkbox" id="worker" class="form-check-input"> 
                    <label class="form-check-label font-weight-bold text-right" for="worker">Worker thread</label><br>
                  </div>
                  <span>Uses a separate thread so the web page doesn't lock up.</span>
                </div>
              <hr>  
                <div class="form-group form-check">
                  <div class="text-center border bg-light">
                    <input type="checkbox" id="header" checked class="form-check-input"> 
                    <label class="form-check-label font-weight-bold text-right" for="header">Header row</label><br>
                  </div>
                  <span>Keys data by field name rather than an array.</span>
                </div>
              <hr>
                <div class="form-group form-check">
                  <div class="text-center border bg-light">
                    <input type="checkbox" id="dynamicTyping" class="form-check-input" checked> 
                    <label class="form-check-label font-weight-bold text-right" for="dynamicTyping">Dynamic typing</label><br>
                  </div>
                  <span>Turns numeric data into numbers and true/false into booleans.</span>
                </div>
              <hr>
                <div class="form-group form-check">
                  <div class="text-center border bg-light">
                    <input type="checkbox" id="skipEmptyLines" class="form-check-input"> 
                    <label class="form-check-label font-weight-bold text-right" for="skipEmptyLines">Skip empty lines</label><br>
                  </div>
                  <span>By default, empty lines are parsed; check to skip.</span>
                </div>
              </div>
            </div>
          </div>
<div class="loader">
   <center>
       <%= image_tag ("ajax-loader.gif"), class: 'loading-image' %>
   </center>
</div>

            <div class="col-8">
              <div class="card card-mini" style="height: 100%;">
              <div class="card-header bg-primary">
                <h5 class="font-weight-bold m-auto text-white">DATA</h5>
              </div>
              <div class="card-body">
                <textarea id="input" placeholder="Copy and paste CSV data here" class="form-control" style="height: 75%;"></textarea>
              <div class="text-center">
                <div class="see-results">
                  Results will appear in the console of your browser's inspector tools
                </div>
                <button id="submit" class="btn btn-primary font-weight-bold">PARSE</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

